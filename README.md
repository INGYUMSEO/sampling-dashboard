# Sampling Dashboard (Streamlit + MySQL)

ì‘ë‹µì ì¡°ì‚¬ì—ì„œ ëª¨ì§‘ë‹¨ â†’ í‘œë³¸ ì¶”ì¶œì„ ë•ëŠ” ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤.  
ì—‘ì…€ ì—…ë¡œë“œ/ëŒ€ì²´, ì›í´ë¦­ ì‹¤í–‰(íšŒì°¨ ìƒì„±â†’ëª©í‘œ ì‚°ì¶œâ†’ì¶”ì¶œ), ë¶€ì¡±ë¶„ Top-up, ì‹¤í–‰ ë¡œê·¸ê¹Œì§€ ì œê³µí•©ë‹ˆë‹¤.

![stack](https://img.shields.io/badge/Streamlit-1.38%2B-red)
![stack](https://img.shields.io/badge/MySQL-8%2B-blue)
![stack](https://img.shields.io/badge/Python-3.10%2B-green)

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

- **ì›í´ë¦­ ì‹¤í–‰**: íšŒì°¨ ìƒì„± â†’ (ì¸µí™”ë©´) ëª©í‘œ ì‚°ì¶œ â†’ ì¶”ì¶œê¹Œì§€ í•œ ë²ˆì—
- **ì¸µí™”/ëœë¤ ì¶”ì¶œ**: ë¹„ìœ¨ JSON ê¸°ë°˜ **ì •í™• N** ëª©í‘œ ì‚°ì¶œ ë˜ëŠ” ëœë¤ N ì¶”ì¶œ
- **ë¶€ì¡±ë¶„ Top-up**: ëª©í‘œ ëŒ€ë¹„ ë¶€ì¡±í•œ ì…€ë§Œ ìë™ ì¶”ê°€ ë°°ì •
- **ëª¨ì§‘ë‹¨ ì—…ë¡œë“œ**: Excel/CSV ì—…ë¡œë“œ, **ëŒ€ì²´/ì¶”ê°€** ëª¨ë“œ ì§€ì›
- **ë°°ì • ìƒì„¸ ë‹¤ìš´ë¡œë“œ**: CSV/XLSX
- **ì‹¤í–‰ ë¡œê·¸(Runs)**: ëˆ„ê°€/ì–¸ì œ/ë¬´ì—‡ì„ ì‹¤í–‰í–ˆëŠ”ì§€ ê¸°ë¡
- **remaining_pool ë·°**: ë°°ì •/ë°°ì œ ì œì™¸ ëŒ€ìƒ ìë™ ë°˜ì˜

---

## ğŸ§± ìš”êµ¬ì‚¬í•­

- **OS**: Windows / macOS / Linux  
- **Python**: 3.10 ì´ìƒ  
- **MySQL**: 8.0 ì´ìƒ (JSON, ìœˆë„ìš° í•¨ìˆ˜ ì‚¬ìš©)  
- **í•„ìˆ˜ íŒ¨í‚¤ì§€**: `streamlit`, `pymysql`, `pandas`, `openpyxl`  
  â†’ `pip install -r requirements.txt`

---
### íƒ­ êµ¬ì„±

#### í˜„í™©/ìƒì„¸
- ìµœê·¼ íšŒì°¨ì˜ ìš”ì•½ ì§€í‘œì™€ **ë°°ì • ìƒì„¸í‘œ**ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
- ê²°ê³¼ë¥¼ **CSV / XLSX**ë¡œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì›í´ë¦­ ì‹¤í–‰
- ëª¨ë“œ ì„ íƒ: **STRATIFIED(ì¸µí™”)** ë˜ëŠ” **RANDOM(ëœë¤)**.
- **íƒ€ê¹ƒ N**, **Seed** ì§€ì •.
- (ì„ íƒ) **í•„í„°**: ì§€ì—­ / ì„±ë³„ / ë‚˜ì´ ë²”ìœ„.
- `STRATIFIED`ì¸ ê²½ìš° **ë¹„ìœ¨ JSON**ì„ ì…ë ¥í•˜ë©´ ì…€ë³„ **ì •í™• N**ì´ ê³„ì‚°ë©ë‹ˆë‹¤.
- **ì›í´ë¦­ ì‹¤í–‰** ë²„íŠ¼ì„ ëˆ„ë¥´ë©´  
  **íšŒì°¨ ìƒì„± â†’ (ì¸µí™”ë©´) ëª©í‘œ ì‚°ì¶œ â†’ ì¶”ì¶œ**ì´ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

#### ëª¨ì§‘ë‹¨ ì—…ë¡œë“œ
- **Excel/CSV** íŒŒì¼ ì—…ë¡œë“œ. í•„ìˆ˜ ì»¬ëŸ¼:
  - `respondent_id, phone_raw, gender, age, region`
- **ëŒ€ì²´** ëª¨ë“œ: ê¸°ì¡´ `population / assignments / exclusions` ì´ˆê¸°í™” í›„ ë°˜ì˜.
- **ì¶”ê°€** ëª¨ë“œ: ê¸°ì¡´ ë°ì´í„°ì— ë§ë¶™ì„(ë™ì¼ IDëŠ” ì—…ë°ì´íŠ¸).
- ì—…ë¡œë“œ í›„ **ë¯¸ë¦¬ë³´ê¸° â†’ ê²€ì¦ â†’ DB ë°˜ì˜** â†’ Remaining Pool ê°±ì‹  ë©”ì‹œì§€ í™•ì¸.

#### ìš´ì˜ ë„êµ¬
- **A) ë¶€ì¡±ë¶„ ìë™ ë³´ì¶© (Top-up)**: íŠ¹ì • `wave_id`ì˜ ëª©í‘œ ëŒ€ë¹„ **ë¶€ì¡±í•œ ì…€ë§Œ** ì¶”ê°€ ë°°ì •.
- **B) ì‹¤í–‰ ë¡œê·¸/ê°ì‚¬ ë˜í¼**: `sp_compute_targets_exactN â†’ sp_sample_wave_stratified`ë¥¼ **runs** í…Œì´ë¸”ì— ê¸°ë¡í•˜ë©° ì‹¤í–‰.
- **C) ìƒ˜í”Œ ë°ì´í„° ë¡œë”**: í…ŒìŠ¤íŠ¸ìš© ëª¨ì§‘ë‹¨ì„ **Nëª… ìƒì„±**(ì™¸ë˜í‚¤ ì•ˆì „ **ë£¨í”„ ë²„ì „**).

---

### ë¹ ë¥¸ ì‹œì—°(ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸)

1. **ìš´ì˜ ë„êµ¬ â†’ C) ìƒ˜í”Œ ë°ì´í„° ë¡œë”**ì—ì„œ `N=8000` ìƒì„±  
   â†’ ìƒë‹¨ **Remaining Pool** ìˆ«ì(ì˜ˆ: 8000) í™•ì¸.
2. **ì›í´ë¦­ ì‹¤í–‰**
   - ëª¨ë“œ: `STRATIFIED`, íƒ€ê¹ƒ N: `120`, Seed: `123456`
   - ì§€ì—­/ì„±ë³„/ë‚˜ì´ í•„í„° ì„ íƒ â†’ ê¸°ë³¸ ì œê³µ **ê· ë“± ë¹„ìœ¨ JSON** ê·¸ëŒ€ë¡œ ì‚¬ìš© â†’ **ì›í´ë¦­ ì‹¤í–‰**
   - â€œíšŒì°¨ ìƒì„± ì™„ë£Œ! `wave_id=â€¦`â€ ë©”ì‹œì§€ì™€ **ìš”ì•½/ë°°ì • ìƒì„¸**ê°€ ì¶œë ¥ë˜ë©´ OK.
3. **í˜„í™©/ìƒì„¸** íƒ­ì—ì„œ **ë°°ì • ìƒì„¸ CSV/XLSX** ë‹¤ìš´ë¡œë“œë¡œ ê²°ê³¼ í™•ì¸.

## ğŸ“¦ ì„¤ì¹˜ & ë¡œì»¬ ì‹¤í–‰
### 1) ê°€ìƒí™˜ê²½ & íŒ¨í‚¤ì§€

> Python 3.10+ ê¶Œì¥. PowerShellì€ `ExecutionPolicy` ë•Œë¬¸ì— í™œì„±í™” ì˜¤ë¥˜ê°€ ë‚˜ë©´ ì•„ë˜ ì°¸ê³ ë¥¼ í™•ì¸í•˜ì„¸ìš”.

**Windows (PowerShell)**

```powershell
# ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv .venv

# í™œì„±í™”
.\.venv\Scripts\Activate.ps1
# (í•„ìš” ì‹œ) ì¼ì‹œì ìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ í—ˆìš©:
# Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt

### macOS / Linux ì„¤ì¹˜ ê³¼ì •

# ê°€ìƒí™˜ê²½ ìƒì„±
python3 -m venv .venv

# í™œì„±í™”
source .venv/bin/activate

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt
